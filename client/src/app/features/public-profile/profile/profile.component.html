<section class="bg-white py-12 sm:py-16 min-h-screen">
  <div class="mx-auto max-w-4xl py-12 px-4 sm:px-6 lg:px-8">

    <!-- Profile Header -->
    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8">
      <div class="flex items-start space-x-6">
        <div class="shrink-0">
          <img class="h-32 w-32 object-cover rounded-full border-4 border-gray-100 shadow-md" src="{{user?.avatar}}"
            alt="{{user?.name}}'s profile picture">
        </div>

        <!-- User Info -->
        <div class="flex-1 min-w-0">
          <h1 class="text-4xl font-bold text-gray-900 mb-3">
            {{user?.name}}
          </h1>
          <p class="text-lg text-gray-600 mb-2">
            {{user?.email}}
          </p>
        </div>

        <div *ngIf="userPublicProfile$ | async as profileData">
          <button type="button" (click)="openEditProfileDialog(profileData)"
            class="inline-flex items-center rounded-lg bg-gray-100 py-2.5 px-4 text-sm font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200">
            Edit Profile
          </button>
        </div>
      </div>
    </div>


    <!-- Navigation -->
    <nav class="bg-white">
      <div class="max-w-4xl mx-auto px-6 py-4">
        <div class="flex space-x-8">
          <button (click)="activeSection = 'home'"
            [class]="activeSection === 'home' ? 'text-gray-900 font-medium border-b-2 border-gray-900 pb-1' : 'text-gray-500 hover:text-gray-900 font-medium pb-1'">
            Home
          </button>
          <button (click)="activeSection = 'about'"
            [class]="activeSection === 'about' ? 'text-gray-900 font-medium border-b-2 border-gray-900 pb-1' : 'text-gray-500 hover:text-gray-900 font-medium pb-1'">
            About
          </button>
        </div>
      </div>
    </nav>


    <!-- Home Section -->
    <div id="homeSection" [class]="activeSection === 'home' ? 'block' : 'hidden'">
      <!-- Reading List Card -->
      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8">
        <div class="flex items-center mb-6">
          <div class="flex items-center justify-center w-12 h-12 bg-red-50 rounded-xl mr-4">

            <mat-icon class="w-6 h-6 text-red-600">favorite_border</mat-icon>

          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">Reading List</h2>
            <p class="text-gray-500 text-sm mt-1">Your saved articles and bookmarks</p>
          </div>
        </div>


        <ng-container *ngIf="userLikedPosts; else noLikedPosts">
          <div *ngFor="let post of userLikedPosts" (click)="navigateToPost(post._id)"
            class="flex gap-4 p-4 border-b border-gray-100 hover:bg-gray-50">

            <div class="flex-1">
              <h3 class="text-lg font-bold text-gray-900 mb-2">{{post.postTitle | titlecase }}</h3>
            </div>

            <img *ngIf="post.postImageUrl" [src]="post.postImageUrl" class="w-20 h-16 object-cover rounded">
            
            <div class="flex items-center">
              <button (click)="removeFromReadingList(post._id)"
                class="p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg"
                title="Remove from reading list">
                <mat-icon class="w-5 h-5">delete_outline</mat-icon>
              </button>
            </div>
          </div>
        </ng-container>


        <ng-template #noLikedPosts>
          <div class="text-center py-12">
            <div class="w-16 h-16 mx-auto mb-4 text-gray-300">

              <mat-icon class="w-6 h-6 text-red-600">favorite_border</mat-icon>
            </div>

            <h3 class="text-lg font-medium text-gray-900 mb-2">No saved articles yet</h3>
            <p class="text-gray-500 max-w-sm mx-auto">Start reading and save interesting posts to build your personal
              library!</p>
          </div>
        </ng-template>
      </div>

      <!-- Stats Section -->
      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">
        <div class="flex items-center mb-6">
          <div class="flex items-center justify-center w-12 h-12 bg-green-50 rounded-xl mr-4">
            <mat-icon svgIcon="bar-chart-outline" class="w-6 h-6 text-green-600"></mat-icon>
          </div>

          <div>
            <h2 class="text-2xl font-bold text-gray-900">Activity</h2>
            <p class="text-gray-500 text-sm mt-1">Your engagement overview</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center p-6 bg-gradient-to-br from-red-50 to-pink-50 rounded-xl">
            <div class="text-3xl font-bold text-red-600 mb-2">{{userLikedPosts.length}}</div>
            <div class="text-sm text-gray-600">Saved Articles</div>
          </div>
          <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl">
            <div class="text-3xl font-bold text-blue-600 mb-2">{{userCreatedPosts.length}}</div>
            <div class="text-sm text-gray-600">Published Posts</div>
          </div>
          <!-- todo followers -->
          <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl">
            <div class="text-3xl font-bold text-green-600 mb-2">0</div>
            <div class="text-sm text-gray-600">Followers</div>
          </div>
        </div>
      </div>

    </div>

    <!-- About Section -->
    <div id="aboutSection" [class]="activeSection === 'about' ? 'block' : 'hidden'">

      <!-- No Public Profile State -->
      <div *ngIf="!(userPublicProfile$ | async)"
        class="bg-white rounded-2xl shadow-sm border border-gray-200 p-12 text-center">

        <h3 class="text-3xl font-bold text-gray-900 mb-4">Create Your Public Profile</h3>
        <p class="text-lg text-gray-600 max-w-lg mx-auto mb-8 leading-relaxed">
          Share your story with the world. Add a bio, showcase your work, and connect with others through your public
          profile.
        </p>

        <div class="space-y-4 mb-8">
          <div class="flex items-center justify-center text-gray-600">

            <mat-icon class="w-5 h-5 text-blue-500 mr-3">done</mat-icon>
            Add your bio and story
          </div>
          <div class="flex items-center justify-center text-gray-600">
            <mat-icon class="w-5 h-5 text-blue-500 mr-3">done</mat-icon>
            Connect your social media
          </div>
          <div class="flex items-center justify-center text-gray-600">
            <mat-icon class="w-5 h-5 text-blue-500 mr-3">done</mat-icon>
            Showcase your work
          </div>
        </div>

        <app-custom-button (click)="openCreateProfileDialog()" 
        [buttonText]="'Get Started'"
        [buttonClass]="'inline-flex items-center justify-center bg-[#276ef1] px-8 py-4 text-center font-semibold text-white transition [box-shadow:rgb(171,_196,_245)_-8px_8px] hover:[box-shadow:rgb(171,_196,_245)_0px_0px]'">
        </app-custom-button>
      </div>

      <!-- Public Profile Content -->
      <div *ngIf="userPublicProfile$ | async as publicProfile" class="space-y-8">

        <!-- Bio Section -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">
          <div class="flex items-center mb-6">
            <div class="flex items-center justify-center w-12 h-12 bg-blue-50 rounded-xl mr-4">

              <mat-icon svgIcon="person" class="w-6 h-6 text-blue-600"></mat-icon>
            </div>
            <div>
              <h2 class="text-2xl font-bold text-gray-900">About</h2>
              <p class="text-gray-500 text-sm mt-1">Tell the world about yourself</p>
            </div>
          </div>

          <div class="prose prose-lg max-w-none">
            <p class="text-gray-700 leading-relaxed text-lg">
              {{ publicProfile.bio }}
            </p>
          </div>
        </div>

        <!-- Social Links Section -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">
          <div class="flex items-center mb-6">
            <div class="flex items-center justify-center w-12 h-12 bg-purple-50 rounded-xl mr-4">

              <mat-icon svgIcon="connect" class="w-6 h-6 text-purple-600"></mat-icon>

            </div>
            <div>
              <h2 class="text-2xl font-bold text-gray-900">Connect</h2>
              <p class="text-gray-500 text-sm mt-1">Find me on social media</p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

            <!-- GitHub -->
            <a *ngIf="getGitHubUrl(publicProfile)" [href]="getGitHubUrl(publicProfile)" target="_blank"
              class="group flex items-center justify-center p-6 bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-xl hover:from-gray-800 hover:to-gray-700 transition-all duration-200 transform hover:scale-105">

              <mat-icon svgIcon="github" class="w-8 h-8 mr-3"></mat-icon>
              <div>
                <div class="font-semibold">GitHub</div>
                <div class="text-sm opacity-75">"&#64;" {{ publicProfile.githubUsername }}</div>
              </div>
            </a>

            <!-- LinkedIn -->

            <a *ngIf="getLinkedInUrl(publicProfile)" [href]="getLinkedInUrl(publicProfile)" target="_blank"
              class="group flex items-center justify-center p-6 bg-gradient-to-br from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-200 transform hover:scale-105">

              <mat-icon svgIcon="linkedin" class="w-8 h-8 mr-3"></mat-icon>

              <div>
                <div class="font-semibold">LinkedIn</div>
                <div class="text-sm opacity-75">Professional</div>
              </div>
            </a>


          </div>
        </div>

        <!-- Action Buttons -->
        <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">
          <div class="flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 sm:space-x-4">

            <button type="button" (click)="openDeleteProfileDialog()"
              class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border-2 border-red-200 rounded-xl text-sm font-semibold text-red-600 bg-red-50 hover:bg-red-100 hover:border-red-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200">

              <mat-icon svgIcon="delete" class="w-5 h-5 mr-2"></mat-icon>

              Delete Profile
            </button>
          </div>
        </div>
      </div>

    </div>

  </div>

</section>