<section class="bg-white py-12 sm:py-16 min-h-screen">
  <div class="mx-auto max-w-4xl py-12 px-4 sm:px-6 lg:px-8">

    <!-- Profile Header -->
    <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8">
      <div class="flex items-start space-x-6">
        <div class="shrink-0">
          <img class="h-32 w-32 object-cover rounded-full border-4 border-gray-100 shadow-md" src="{{user?.avatar}}"
            alt="{{user?.name}}'s profile picture">
        </div>

        <!-- User Info -->
        <div class="flex-1 min-w-0">
          <h1 class="text-4xl font-bold text-gray-900 mb-3">
            {{user?.name}}
          </h1>
          <p class="text-lg text-gray-600 mb-2">
            {{user?.email}}
          </p>
        </div>

        <div *ngIf="userPublicProfile$ | async as profileData">
          <button type="button" (click)="openEditProfileDialog(profileData)"
            class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 border-2 border-blue-200 rounded-xl text-sm font-semibold text-blue-600 bg-blue-50 hover:bg-blue-100 hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200">
            <mat-icon class="w-5 h-5 mr-2">edit</mat-icon>
            Edit Profile
          </button>
        </div>
      </div>
    </div>


    <!-- Navigation -->
    <nav class="bg-white">
      <div class="max-w-4xl mx-auto px-6 py-4">
        <div class="flex space-x-8">
          <button (click)="activeSection = 'home'"
            [class]="activeSection === 'home' ? 'text-gray-900 font-medium border-b-2 border-gray-900 pb-1' : 'text-gray-500 hover:text-gray-900 font-medium pb-1'">
            Home
          </button>
          <button (click)="activeSection = 'about'"
            [class]="activeSection === 'about' ? 'text-gray-900 font-medium border-b-2 border-gray-900 pb-1' : 'text-gray-500 hover:text-gray-900 font-medium pb-1'">
            About
          </button>
        </div>
      </div>
    </nav>


    <!-- Home Section -->
    <div id="homeSection" [class]="activeSection === 'home' ? 'block' : 'hidden'">
      <!-- Reading List Card -->
      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8 mb-8">
        <div class="flex items-center mb-6">
          <div class="flex items-center justify-center w-12 h-12 bg-red-50 rounded-xl mr-4">

            <mat-icon class="w-6 h-6 text-red-600">favorite_border</mat-icon>

          </div>
          <div>
            <h2 class="text-2xl font-bold text-gray-900">Reading List</h2>
            <p class="text-gray-500 text-sm mt-1">Your saved articles and bookmarks</p>
          </div>
        </div>


        <ng-container *ngIf="userLikedPosts$ | async as likedPosts; else noLikedPosts">

          <div *ngFor="let post of likedPosts"
            class="group flex gap-4 p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200">

            <div (click)="navigateToPost(post._id)" class="flex-1 flex gap-4 cursor-pointer">
              <div class="flex-1">
                <h3 class="text-lg font-bold text-gray-900 mb-2">{{post.postTitle | titlecase }}</h3>
              </div>
              <img *ngIf="post.postImageUrl" [src]="post.postImageUrl" class="w-20 h-16 object-cover rounded">
            </div>

            <div class="flex items-center">
              <button (click)="removeFromReadingList(post._id)"
                class="p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg"
                title="Remove from reading list">
                <mat-icon class="w-5 h-5">delete_outline</mat-icon>
              </button>
            </div>
          </div>
        </ng-container>


        <ng-template #noLikedPosts>
          <div class="text-center py-12">
            <div class="w-16 h-16 mx-auto mb-4 text-gray-300">

              <mat-icon class="w-6 h-6 text-red-600">favorite_border</mat-icon>
            </div>

            <h3 class="text-lg font-medium text-gray-900 mb-2">No saved articles yet</h3>
            <p class="text-gray-500 max-w-sm mx-auto">Start reading and save interesting posts to build your personal
              library!</p>
          </div>
        </ng-template>
      </div>

      <!-- Stats Section -->
      <div class="bg-white rounded-2xl shadow-sm border border-gray-200 p-8">
        <div class="flex items-center mb-6">
          <div class="flex items-center justify-center w-12 h-12 bg-green-50 rounded-xl mr-4">
            <mat-icon svgIcon="bar-chart-outline" class="w-6 h-6 text-green-600"></mat-icon>
          </div>

          <div>
            <h2 class="text-2xl font-bold text-gray-900">Activity</h2>
            <p class="text-gray-500 text-sm mt-1">Your engagement overview</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center p-6 bg-gradient-to-br from-red-50 to-pink-50 rounded-xl">
            <div class="text-3xl font-bold text-red-600 mb-2"> {{(userLikedPosts$ | async)?.length || 0}}</div>
            <div class="text-sm text-gray-600">Saved Articles</div>
          </div>
          <div class="text-center p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl">
            <div class="text-3xl font-bold text-blue-600 mb-2">{{(userCreatedPosts$ | async)?.length}}</div>
            <div class="text-sm text-gray-600">Published Posts</div>
          </div>
       
          <div class="text-center p-6 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl">
            <div class="text-3xl font-bold text-green-600 mb-2">{{ (userFollowers$ | async)?.length || 0}}</div>
            <div class="text-sm text-gray-600"> Followers</div>
          </div>
        </div>
      </div>

    </div>

    <!-- About Section -->
    <div id="aboutSection" [class]="activeSection === 'about' ? 'block' : 'hidden'">
      <app-public-profile [profileData]="userPublicProfile$ | async"></app-public-profile>

    </div>

  </div>

</section>